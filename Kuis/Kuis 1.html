<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuis Kata Depan "Ke" dan "Di"</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        body {
            font-family: 'Press Start 2P', monospace;
            image-rendering: pixelated;
            cursor: none;
        }
        
        .custom-cursor {
            position: fixed;
            width: 24px;
            height: 24px;
            pointer-events: none;
            z-index: 9999;
            transition: transform 0.1s ease;
        }
        
        .cursor-pointer {
            background: linear-gradient(45deg, 
                #ff0040 0%, #ff0040 25%, 
                #ffff00 25%, #ffff00 50%, 
                #00ff41 50%, #00ff41 75%, 
                #00ffff 75%, #00ffff 100%);
            clip-path: polygon(0 0, 70% 0, 100% 30%, 100% 100%, 30% 100%, 0 70%);
            animation: cursorGlow 1s ease-in-out infinite alternate;
        }
        
        .cursor-clicking {
            transform: scale(1.5);
            animation: cursorClick 0.2s ease-out;
        }
        
        @keyframes cursorGlow {
            0% { 
                box-shadow: 0 0 10px #ff0040, 0 0 20px #ff0040, 0 0 30px #ff0040;
                filter: brightness(1);
            }
            100% { 
                box-shadow: 0 0 15px #00ffff, 0 0 25px #00ffff, 0 0 35px #00ffff;
                filter: brightness(1.2);
            }
        }
        
        @keyframes cursorClick {
            0% { transform: scale(1.5); }
            50% { transform: scale(2); }
            100% { transform: scale(1.5); }
        }
        
        .click-particle {
            position: fixed;
            width: 8px;
            height: 8px;
            pointer-events: none;
            z-index: 9998;
            animation: particleExplode 0.8s ease-out forwards;
        }
        
        @keyframes particleExplode {
            0% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: scale(0) rotate(360deg);
                opacity: 0;
            }
        }
        
        .heart-bounce {
            animation: heartBeat 0.5s ease-in-out;
        }
        
        @keyframes heartBeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .screen-shake {
            animation: screenShake 0.4s ease-in-out;
        }
        
        @keyframes screenShake {
            0%, 100% { transform: translateX(0); }
            10% { transform: translateX(-4px) rotate(-0.3deg); }
            20% { transform: translateX(4px) rotate(0.3deg); }
            30% { transform: translateX(-3px) rotate(-0.2deg); }
            40% { transform: translateX(3px) rotate(0.2deg); }
            50% { transform: translateX(-2px) rotate(-0.1deg); }
            60% { transform: translateX(2px) rotate(0.1deg); }
            70% { transform: translateX(-1px); }
            80% { transform: translateX(1px); }
            90% { transform: translateX(-0.5px); }
        }
        
        .glitch-text {
            position: relative;
            animation: glitch 0.3s infinite;
        }
        
        .glitch-text::before,
        .glitch-text::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .glitch-text::before {
            animation: glitchTop 0.3s infinite;
            clip-path: polygon(0 0, 100% 0, 100% 33%, 0 33%);
            color: #ff0040;
        }
        
        .glitch-text::after {
            animation: glitchBottom 0.3s infinite;
            clip-path: polygon(0 67%, 100% 67%, 100% 100%, 0 100%);
            color: #00ffff;
        }
        
        @keyframes glitch {
            0%, 100% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
        }
        
        @keyframes glitchTop {
            0%, 100% { transform: translate(0); }
            20% { transform: translate(-2px, -2px); }
            40% { transform: translate(-2px, 2px); }
            60% { transform: translate(2px, -2px); }
            80% { transform: translate(2px, 2px); }
        }
        
        @keyframes glitchBottom {
            0%, 100% { transform: translate(0); }
            20% { transform: translate(2px, 2px); }
            40% { transform: translate(2px, -2px); }
            60% { transform: translate(-2px, 2px); }
            80% { transform: translate(-2px, -2px); }
        }
        
        .matrix-rain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.6;
        }
        
        .matrix-char {
            position: absolute;
            color: #00ff41;
            font-family: 'Press Start 2P', monospace;
            font-size: 12px;
            animation: matrixFall linear infinite;
            text-shadow: 0 0 5px #00ff41;
        }
        
        @keyframes matrixFall {
            0% {
                transform: translateY(-100vh);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }
                .background-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            object-fit: cover;
            z-index: 0;
            opacity: 0.3;
        }
        .pixel-explosion {
            position: fixed;
            width: 10px;
            height: 10px;
            pointer-events: none;
            z-index: 9997;
            animation: pixelExplode 2s ease-out forwards;
        }
        
        @keyframes pixelExplode {
            0% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(1.5) rotate(180deg);
                opacity: 0.8;
            }
            100% {
                transform: scale(0) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="min-h-screen relative overflow-hidden" style="background: linear-gradient(45deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #533483 75%, #e94560 100%);"> 
   
       <video class="background-video" autoplay muted loop>
        <source src="meteor.mp4" type="video/mp4">
        <source src="background-video.webm" type="video/webm">
        Your browser does not support the video tag.
    </video>  
   
   
   <!-- Custom 8-bit Cursor -->
    <div id="customCursor" class="custom-cursor cursor-pointer"></div>
    
    <!-- Matrix Rain Effect -->
    <div id="matrixRain" class="matrix-rain"></div>
    
    <!-- Enhanced 8-bit Background Layers -->
    <div class="absolute inset-0 opacity-30">
        <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <pattern id="pixelGrid" width="20" height="20" patternUnits="userSpaceOnUse">
                    <rect width="20" height="20" fill="none" stroke="#00ff41" stroke-width="0.8"/>
                    <circle cx="10" cy="10" r="1" fill="#00ff41" opacity="0.6"/>
                </pattern>
                <pattern id="pixelGrid2" width="40" height="40" patternUnits="userSpaceOnUse">
                    <rect width="40" height="40" fill="none" stroke="#ff0080" stroke-width="0.5"/>
                    <rect x="15" y="15" width="10" height="10" fill="#ff0080" opacity="0.3"/>
                </pattern>
                <pattern id="scanlines" width="100%" height="4" patternUnits="userSpaceOnUse">
                    <rect width="100%" height="2" fill="#00ffff" opacity="0.1"/>
                    <rect y="2" width="100%" height="2" fill="transparent"/>
                </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#pixelGrid)" />
            <rect width="100%" height="100%" fill="url(#pixelGrid2)" />
            <rect width="100%" height="100%" fill="url(#scanlines)" class="animate-pulse" />
        </svg>
    </div>

    <!-- Floating 8-bit Particles -->
    <div class="absolute inset-0 overflow-hidden">
        <div class="absolute top-10 left-10 w-20 h-20 bg-yellow-400 animate-bounce shadow-lg" style="clip-path: polygon(0 0, 100% 0, 100% 75%, 75% 75%, 75% 100%, 50% 100%, 50% 75%, 25% 75%, 25% 50%, 0 50%); box-shadow: 0 0 20px #fbbf24; animation-duration: 3s;"></div>
        <div class="absolute top-32 right-20 w-16 h-16 bg-red-500 animate-pulse shadow-lg" style="clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); box-shadow: 0 0 15px #ef4444; animation-duration: 2s;"></div>
        <div class="absolute bottom-20 left-32 w-18 h-18 bg-green-400 animate-bounce shadow-lg" style="clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%, 0% 20%); box-shadow: 0 0 18px #10b981; animation-duration: 2.5s;"></div>
        <div class="absolute bottom-40 right-16 w-22 h-22 bg-blue-400 animate-pulse shadow-lg" style="clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%); box-shadow: 0 0 25px #3b82f6; animation-duration: 1.8s;"></div>
        <div class="absolute top-1/4 left-1/4 w-12 h-12 bg-cyan-400 animate-spin shadow-md" style="box-shadow: 0 0 12px #06b6d4; animation-duration: 4s;"></div>
        <div class="absolute top-3/4 right-1/3 w-10 h-10 bg-pink-400 animate-bounce shadow-md" style="clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); box-shadow: 0 0 10px #ec4899; animation-duration: 2.2s;"></div>
        <div class="absolute top-1/2 left-1/6 w-14 h-14 bg-purple-400 animate-pulse shadow-md" style="clip-path: polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%); box-shadow: 0 0 14px #a855f7; animation-duration: 3.2s;"></div>
        <div class="absolute bottom-1/3 right-1/4 w-16 h-16 bg-orange-400 animate-spin shadow-md" style="clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); box-shadow: 0 0 16px #fb923c; animation-duration: 5s;"></div>
        <div class="absolute top-20 right-1/3 w-6 h-6 bg-lime-400 animate-ping" style="box-shadow: 0 0 8px #84cc16; animation-duration: 1.5s;"></div>
        <div class="absolute top-2/3 left-20 w-8 h-8 bg-indigo-400 animate-bounce" style="clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); box-shadow: 0 0 6px #6366f1; animation-duration: 1.8s;"></div>
        <div class="absolute bottom-1/4 left-2/3 w-5 h-5 bg-rose-400 animate-pulse" style="box-shadow: 0 0 5px #f43f5e; animation-duration: 2.1s;"></div>
        <div class="absolute top-1/3 right-20 w-7 h-7 bg-emerald-400 animate-ping" style="clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%); box-shadow: 0 0 7px #10b981; animation-duration: 1.7s;"></div>
        <div class="absolute bottom-10 right-1/2 w-9 h-9 bg-violet-400 animate-spin" style="box-shadow: 0 0 9px #8b5cf6; animation-duration: 3.5s;"></div>
        <div class="absolute top-1/2 right-10 w-4 h-4 bg-amber-400 animate-bounce" style="box-shadow: 0 0 4px #f59e0b; animation-duration: 2.3s;"></div>
    </div>

    <!-- Animated Circuit Lines -->
    <div class="absolute inset-0 opacity-20">
        <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
            <line x1="0" y1="20%" x2="100%" y2="20%" stroke="#00ff41" stroke-width="2" opacity="0.6" class="animate-pulse"/>
            <line x1="0" y1="40%" x2="100%" y2="40%" stroke="#ff0080" stroke-width="1.5" opacity="0.5" class="animate-pulse" style="animation-delay: 0.5s;"/>
            <line x1="0" y1="60%" x2="100%" y2="60%" stroke="#00ffff" stroke-width="2" opacity="0.6" class="animate-pulse" style="animation-delay: 1s;"/>
            <line x1="0" y1="80%" x2="100%" y2="80%" stroke="#ffff00" stroke-width="1.5" opacity="0.5" class="animate-pulse" style="animation-delay: 1.5s;"/>
            <line x1="20%" y1="0" x2="20%" y2="100%" stroke="#ff4080" stroke-width="1.5" opacity="0.5" class="animate-pulse" style="animation-delay: 0.3s;"/>
            <line x1="50%" y1="0" x2="50%" y2="100%" stroke="#40ff80" stroke-width="2" opacity="0.6" class="animate-pulse" style="animation-delay: 0.8s;"/>
            <line x1="80%" y1="0" x2="80%" y2="100%" stroke="#8040ff" stroke-width="1.5" opacity="0.5" class="animate-pulse" style="animation-delay: 1.3s;"/>
            <circle cx="20%" cy="20%" r="3" fill="#00ff41" class="animate-ping" style="animation-duration: 2s;"/>
            <circle cx="50%" cy="40%" r="4" fill="#ff0080" class="animate-ping" style="animation-duration: 2.5s; animation-delay: 0.5s;"/>
            <circle cx="80%" cy="60%" r="3" fill="#00ffff" class="animate-ping" style="animation-duration: 2.2s; animation-delay: 1s;"/>
            <circle cx="20%" cy="80%" r="4" fill="#ffff00" class="animate-ping" style="animation-duration: 2.8s; animation-delay: 1.5s;"/>
        </svg>
    </div>

    <!-- Glowing Orbs -->
    <div class="absolute top-1/6 left-1/5 w-32 h-32 rounded-full bg-gradient-to-r from-cyan-400 to-blue-500 opacity-20 animate-pulse blur-xl" style="animation-duration: 4s;"></div>
    <div class="absolute bottom-1/4 right-1/6 w-40 h-40 rounded-full bg-gradient-to-r from-pink-400 to-red-500 opacity-15 animate-pulse blur-xl" style="animation-duration: 5s; animation-delay: 1s;"></div>
    <div class="absolute top-1/2 left-1/12 w-28 h-28 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 opacity-25 animate-pulse blur-xl" style="animation-duration: 3.5s; animation-delay: 2s;"></div>
    <div class="absolute bottom-1/6 right-1/3 w-36 h-36 rounded-full bg-gradient-to-r from-purple-400 to-violet-500 opacity-18 animate-pulse blur-xl" style="animation-duration: 4.5s; animation-delay: 0.5s;"></div>

    <!-- Start Screen -->
    <div id="startScreen" class="min-h-screen flex items-center justify-center p-4 relative z-10">
        <div class="bg-black border-4 border-cyan-400 p-8 max-w-md w-full text-center fade-in" style="box-shadow: 0 0 20px #00ff41;">
            <div class="mb-6">
                <h1 class="text-2xl font-bold text-cyan-400 mb-2">Bahasa Indonesia</h1>
                <p class="text-green-400">Pelajari penggunaan "ke" dan "di"</p>
				<br>
				<p class="text-cyan-400">-----------------------</p>
				<br>
				<p class="text-green-400">Learn the use of "ke" and "di"</p>
            </div>
            
            <div class="mb-6">
                <label class="block text-left text-yellow-400 font-medium mb-2">Masukkan Nama Anda:</label>
                <input type="text" id="playerName" class="w-full px-4 py-3 bg-black border-2 border-green-400 text-white focus:border-cyan-400 focus:outline-none transition-colors" placeholder="Nama Anda..." style="box-shadow: inset 0 0 10px #00ff41;">
            </div>
            
            <button onclick="startQuiz()" class="w-full bg-red-600 border-2 border-yellow-400 text-white font-semibold py-3 px-6 hover:bg-red-700 transform hover:scale-105 transition-all duration-200" style="box-shadow: 0 0 15px #ff0040;">
                Mulai Kuis
            </button>
        </div>
    </div>

    <!-- Quiz Screen -->
    <div id="quizScreen" class="min-h-screen p-4 hidden relative z-10">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="bg-black border-4 border-purple-400 p-6 mb-6" style="box-shadow: 0 0 20px #8b5cf6;">
                <div class="flex justify-between items-center">
                    <div>
                        <h2 class="text-lg font-bold text-cyan-400">Halo, <span id="displayName" class="text-yellow-400"></span>!</h2>
                        <p class="text-green-400">Pertanyaan <span id="questionNumber">1</span> dari <span id="totalQuestions">10</span></p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button id="musicToggle" onclick="toggleMusicControl()" class="bg-blue-600 border-2 border-cyan-400 text-white px-3 py-2 hover:bg-cyan-600 transition-all duration-200 text-sm" style="box-shadow: 0 0 10px #06b6d4;">
                            üéµ ON
                        </button>
                        <div class="bg-green-600 border-2 border-green-400 text-white px-3 py-2 text-sm animate-pulse" style="box-shadow: 0 0 10px #10b981;">
						Hazu
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-red-400 font-medium">Nyawa:</span>
                            <div id="hearts" class="flex space-x-1">
                                <span class="text-2xl">‚ù§Ô∏è</span>
                                <span class="text-2xl">‚ù§Ô∏è</span>
                                <span class="text-2xl">‚ù§Ô∏è</span>
                                <span class="text-2xl">‚ù§Ô∏è</span>
                                <span class="text-2xl">‚ù§Ô∏è</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question Card -->
            <div class="bg-black border-4 border-green-400 p-8 mb-6 fade-in" style="box-shadow: 0 0 20px #10b981;">
                <!-- Timer Display -->
                <div class="flex justify-center mb-6">
                    <div class="bg-red-600 border-2 border-yellow-400 px-6 py-3 text-center" style="box-shadow: 0 0 15px #ff0040;">
                        <div class="text-yellow-400 text-sm font-bold">WAKTU TERSISA</div>
                        <div id="timerDisplay" class="text-white text-2xl font-bold">01:00</div>
                    </div>
                </div>
                
                <h3 id="questionText" class="text-xl font-bold text-white mb-4 text-center"></h3>
                <p id="questionTranslation" class="text-sm text-gray-400 mb-8 text-center italic"></p>
                
                <div id="answersContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Answers will be inserted here -->
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="bg-black border-4 border-blue-400 p-4" style="box-shadow: 0 0 20px #3b82f6;">
                <div class="w-full bg-gray-800 h-4 border-2 border-white">
                    <div id="progressBar" class="bg-green-400 h-full transition-all duration-500" style="width: 10%; box-shadow: 0 0 10px #10b981;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Explanation Popup -->
    <div id="explanationPopup" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-black border-4 border-cyan-400 p-8 max-w-2xl w-full text-center fade-in" style="box-shadow: 0 0 30px #06b6d4;">
            <div class="mb-6">
                <div id="explanationIcon" class="text-6xl mb-4">‚úÖ</div>
                <h2 id="explanationTitle" class="text-2xl font-bold text-cyan-400 mb-4">Jawaban Benar!</h2>
                <div class="bg-gray-900 border-2 border-cyan-400 p-4 mb-4 text-left" style="box-shadow: inset 0 0 15px #06b6d4;">
                    <div class="flex justify-between items-center mb-2">
                        <div class="text-yellow-400 font-bold">üí° Penjelasan:</div>
                        <button id="languageToggle" onclick="toggleExplanationLanguage()" class="bg-purple-600 border-2 border-purple-400 text-white px-3 py-1 hover:bg-purple-700 transition-all duration-200 text-xs" style="box-shadow: 0 0 8px #8b5cf6;">
                            üáÆüá© ID
                        </button>
                    </div>
                    <p id="explanationText" class="text-white text-sm leading-relaxed"></p>
                </div>
            </div>
            
            <button id="continueButton" onclick="continueToNextQuestion()" class="w-full bg-green-600 border-2 border-yellow-400 text-white font-semibold py-3 px-6 hover:bg-green-700 transform hover:scale-105 transition-all duration-200" style="box-shadow: 0 0 15px #10b981;">
                Lanjutkan
            </button>
        </div>
    </div>

    <!-- Game Over Popup -->
    <div id="gameOverPopup" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-black border-4 border-red-400 p-8 max-w-md w-full text-center fade-in" style="box-shadow: 0 0 30px #ef4444;">
            <div class="mb-6">
                <div class="text-6xl mb-4">üíÄ</div>
                <h2 class="text-2xl font-bold text-red-400 mb-2 glitch-text" data-text="GAME OVER!">GAME OVER!</h2>
                <p class="text-white">Anda gagal karena habisan nyawa</p>
                <p class="text-gray-400 text-sm mt-2">Nyawa: 0/5 ‚ù§Ô∏è</p>
            </div>
            
            <div class="bg-gray-900 border-2 border-red-400 p-4 mb-6" style="box-shadow: inset 0 0 15px #ef4444;">
                <div class="text-center">
                    <div class="text-lg font-bold text-yellow-400 mb-2">Statistik Terakhir:</div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center">
                            <div class="text-xl font-bold text-green-400" id="gameOverCorrect">0</div>
                            <div class="text-xs text-green-400">Benar</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xl font-bold text-red-400" id="gameOverWrong">0</div>
                            <div class="text-xs text-red-400">Salah</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button onclick="restartFromGameOver()" class="w-full bg-red-600 border-2 border-yellow-400 text-white font-semibold py-3 px-6 hover:bg-red-700 transform hover:scale-105 transition-all duration-200" style="box-shadow: 0 0 15px #ff0040;">
                Coba Lagi
            </button>
        </div>
    </div>

    <!-- All Explanations Popup -->
    <div id="allExplanationsPopup" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-black border-4 border-purple-400 p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto fade-in" style="box-shadow: 0 0 30px #8b5cf6;">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-purple-400 mb-4 text-center">üìñ Semua Penjelasan</h2>
                <div class="flex justify-center mb-4">
                    <button id="allExplanationsLanguageToggle" onclick="toggleAllExplanationsLanguage()" class="bg-cyan-600 border-2 border-cyan-400 text-white px-4 py-2 hover:bg-cyan-700 transition-all duration-200 text-sm" style="box-shadow: 0 0 8px #06b6d4;">
                        üáÆüá© ID
                    </button>
                </div>
            </div>
            
            <div id="allExplanationsContent" class="space-y-6">
                <!-- Explanations will be inserted here -->
            </div>
            
            <div class="mt-8 text-center">
                <button onclick="closeAllExplanations()" class="bg-red-600 border-2 border-yellow-400 text-white font-semibold py-3 px-8 hover:bg-red-700 transform hover:scale-105 transition-all duration-200" style="box-shadow: 0 0 15px #ef4444;">
                    Tutup
                </button>
            </div>
        </div>
    </div>

    <!-- Result Screen -->
    <div id="resultScreen" class="min-h-screen flex items-center justify-center p-4 hidden relative z-10">
        <div class="bg-black border-4 border-cyan-400 p-8 max-w-md w-full text-center fade-in" style="box-shadow: 0 0 20px #00ff41;">
            <div class="mb-6">
                <div id="resultIcon" class="text-6xl mb-4">üéâ</div>
                <h2 class="text-2xl font-bold text-cyan-400 mb-2">Kuis Selesai!</h2>
                <p class="text-green-400">Terima kasih <span id="finalName" class="font-semibold text-yellow-400"></span></p>
            </div>
            
            <div class="bg-gray-900 border-2 border-cyan-400 p-6 mb-6" style="box-shadow: inset 0 0 15px #00ff41;">
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="text-center">
                        <div class="text-2xl font-bold text-green-600" id="correctCount">0</div>
                        <div class="text-sm text-green-400">Benar</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-red-600" id="wrongCount">0</div>
                        <div class="text-sm text-gray-600">Salah</div>
                    </div>
                </div>
                
                <div class="text-center">
                    <div class="text-3xl font-bold text-purple-600 mb-1" id="percentage">0%</div>
                    <div class="text-sm text-gray-600">Tingkat Kebenaran</div>
                </div>
            </div>
            
            <div class="space-y-3">
                <button onclick="saveResultImage()" class="w-full bg-blue-600 border-2 border-cyan-400 text-white font-semibold py-3 px-6 hover:bg-cyan-600 transform hover:scale-105 transition-all duration-200 flex items-center justify-center space-x-2 mb-3" style="box-shadow: 0 0 15px #06b6d4;">
                    <span>üíæ</span>
                    <span>Save Image</span>
                </button>
                <button onclick="showAllExplanations()" class="w-full bg-purple-600 border-2 border-purple-400 text-white font-semibold py-3 px-6 hover:bg-purple-700 transform hover:scale-105 transition-all duration-200 flex items-center justify-center space-x-2 mb-3" style="box-shadow: 0 0 15px #8b5cf6;">
                    <span>üìñ</span>
                    <span>Explanation</span>
                </button>
                <button onclick="restartQuiz()" class="w-full bg-red-600 border-2 border-yellow-400 text-white font-semibold py-3 px-6 hover:bg-red-700 transform hover:scale-105 transition-all duration-200" style="box-shadow: 0 0 15px #ff0040;">
                    Main Lagi
                </button>
            </div>
        </div>
    </div>

    <script>
        // Quiz Questions - Indonesian Grammar: "ke" and "di"
        const questions = [
            {
                question: "Manakah kalimat yang menggunakan \"ke\" dengan benar?",
                translation: "Which sentence uses \"ke\" correctly?",
                answers: ["A. Ibu menyapu ke halaman.", "B. Ayah pergi ke kantor.", "C. Adik tidur ke kasur.", "D. Kucing makan ke dapur."],
                correct: 1,
                explanation: "Kata depan \"ke\" digunakan dalam kalimat untuk menunjukkan arah atau tujuan. Kata ini digunakan ketika seseorang atau sesuatu sedang bergerak menuju suatu tempat. Kalimat \"Ayah pergi ke kantor\" menggunakan \"ke\" secara tepat karena menunjukkan arah atau tujuan ayah dari rumah menuju kantor. Sementara kalimat lainnya keliru: \"Ibu menyapu ke halaman\" tidak tepat karena menyapu adalah aktivitas di tempat. Seharusnya \"di halaman\". \"Adik tidur ke kasur\" juga tidak benar karena tidur dilakukan di tempat, bukan menuju. Seharusnya \"di kasur\". \"Kucing makan ke dapur\" tidak sesuai, karena makan adalah kegiatan di tempat. Seharusnya \"di dapur\".",
                explanationJp: "ÂâçÁΩÆË©û„Äåke„Äç„ÅØÊñá‰∏≠„ÅßÊñπÂêë„ÇÑÁõÆÁöÑÂú∞„ÇíÁ§∫„Åô„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ„Åì„ÅÆË™û„ÅØË™∞„Åã„ÇÑ‰Ωï„Åã„Åå„ÅÇ„ÇãÂ†¥ÊâÄ„Å´Âêë„Åã„Å£„Å¶ÁßªÂãï„Åó„Å¶„ÅÑ„ÇãÊôÇ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ„ÄåAyah pergi ke kantor„ÄçÔºàÁà∂„ÅØ‰ºöÁ§æ„Å´Ë°å„ÅèÔºâ„Å®„ÅÑ„ÅÜÊñá„ÅØ„ÄÅÁà∂„ÅåÂÆ∂„Åã„Çâ‰ºöÁ§æ„Å∏„ÅÆÊñπÂêë„ÇÑÁõÆÁöÑÂú∞„ÇíÁ§∫„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅ„Äåke„Äç„ÇíÊ≠£„Åó„Åè‰ΩøÁî®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ‰ªñ„ÅÆÊñá„ÅØÈñìÈÅï„Å£„Å¶„ÅÑ„Åæ„ÅôÔºö„ÄåIbu menyapu ke halaman„Äç„ÅØÊéÉÈô§„Åå„Åù„ÅÆÂ†¥„Åß„ÅÆÊ¥ªÂãï„Å™„ÅÆ„Åß‰∏çÈÅ©Âàá„Åß„Åô„ÄÇ„Äådi halaman„Äç„Åß„ÅÇ„Çã„Åπ„Åç„Åß„Åô„ÄÇ„ÄåAdik tidur ke kasur„Äç„ÇÇÁù°Áú†„ÅØ„Åù„ÅÆÂ†¥„ÅßË°å„Çè„Çå„Çã„Åü„ÇÅÈñìÈÅï„ÅÑ„Åß„ÄÅÂêë„Åã„ÅÜ„ÅÆ„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Äådi kasur„Äç„Åß„ÅÇ„Çã„Åπ„Åç„Åß„Åô„ÄÇ„ÄåKucing makan ke dapur„Äç„ÅØ‰∏çÈÅ©Âàá„Åß„ÄÅÈ£ü‰∫ã„ÅØ„Åù„ÅÆÂ†¥„Åß„ÅÆÊ¥ªÂãï„Å†„Åã„Çâ„Åß„Åô„ÄÇ„Äådi dapur„Äç„Åß„ÅÇ„Çã„Åπ„Åç„Åß„Åô„ÄÇ"
            },
            {
                question: "Kalimat yang menggunakan \"di\" dengan tepat adalah...",
                translation: "The sentence that uses \"di\" correctly is...",
                answers: ["A. Buku itu di baca.", "B. Kami bermain di taman.", "C. Kakak menulis di ke meja.", "D. Ayah pergi di kantor."],
                correct: 1,
                explanation: "Kata depan \"di\" dipakai untuk menunjukkan lokasi suatu kegiatan atau tempat keberadaan sesuatu. Kalimat \"Kami bermain di taman\" tepat karena menunjukkan tempat terjadinya kegiatan bermain, yaitu taman. Kalimat lain salah: \"Buku itu di baca\" salah karena \"dibaca\" seharusnya digabung sebagai bentuk pasif. \"Kakak menulis di ke meja\" tidak sesuai karena struktur kalimat kacau. \"Ayah pergi di kantor\" tidak tepat karena \"pergi\" menyatakan perpindahan, bukan lokasi, harusnya \"ke kantor\".",
                explanationJp: "ÂâçÁΩÆË©û„Äådi„Äç„ÅØÊ¥ªÂãï„ÅÆÂ†¥ÊâÄ„ÇÑ‰Ωï„Åã„ÅåÂ≠òÂú®„Åô„ÇãÂ†¥ÊâÄ„ÇíÁ§∫„Åô„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ„ÄåKami bermain di taman„ÄçÔºàÁßÅ„Åü„Å°„ÅØÂÖ¨Âúí„ÅßÈÅä„Å∂Ôºâ„Å®„ÅÑ„ÅÜÊñá„ÅØ„ÄÅÈÅä„Å∂Ê¥ªÂãï„ÅåË°å„Çè„Çå„ÇãÂ†¥ÊâÄ„ÄÅ„Å§„Åæ„ÇäÂÖ¨Âúí„ÇíÁ§∫„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅÊ≠£„Åó„ÅÑ„Åß„Åô„ÄÇ‰ªñ„ÅÆÊñá„ÅØÈñìÈÅï„Å£„Å¶„ÅÑ„Åæ„ÅôÔºö„ÄåBuku itu di baca„Äç„ÅØ„Äådibaca„Äç„ÅåÂèóÂãïÂΩ¢„Å®„Åó„Å¶ÁµêÂêà„Åï„Çå„Çã„Åπ„Åç„Å™„ÅÆ„ÅßÈñìÈÅï„ÅÑ„Åß„Åô„ÄÇ„ÄåKakak menulis di ke meja„Äç„ÅØÊñáÊßãÈÄ†„ÅåÊ∑∑‰π±„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅ‰∏çÈÅ©Âàá„Åß„Åô„ÄÇ„ÄåAyah pergi di kantor„Äç„ÅØ„Äåpergi„Äç„ÅåÂ†¥ÊâÄ„Åß„ÅØ„Å™„ÅèÁßªÂãï„ÇíË°®„Åô„Åü„ÇÅÈñìÈÅï„ÅÑ„Åß„ÄÅ„Äåke kantor„Äç„Åß„ÅÇ„Çã„Åπ„Åç„Åß„Åô„ÄÇ"
            },
            {
                question: "Kalimat mana yang SALAH dalam penggunaan \"ke\" atau \"di\"?",
                translation: "Which sentence is WRONG in using \"ke\" or \"di\"?",
                answers: ["A. Nenek duduk di kursi.", "B. Kakak pergi ke sekolah.", "C. Saya membaca buku di kamar.", "D. Mereka bermain ke halaman."],
                correct: 3,
                explanation: "Kata kerja \"bermain\" tidak menunjukkan gerakan ke suatu tempat, melainkan aktivitas yang terjadi di suatu lokasi. Oleh karena itu, kata depan yang benar adalah \"di\", bukan \"ke\". Kalimat yang benar adalah \"Mereka bermain di halaman\". Kalimat A, B, dan C sudah benar penggunaannya: \"duduk di kursi\" menyatakan tempat duduk, \"pergi ke sekolah\" menunjukkan arah, \"membaca di kamar\" menyatakan tempat kegiatan.",
                explanationJp: "ÂãïË©û„Äåbermain„ÄçÔºàÈÅä„Å∂Ôºâ„ÅØÂ†¥ÊâÄ„Å∏„ÅÆÁßªÂãï„ÇíÁ§∫„Åô„ÅÆ„Åß„ÅØ„Å™„Åè„ÄÅ„ÅÇ„ÇãÂ†¥ÊâÄ„ÅßËµ∑„Åì„ÇãÊ¥ªÂãï„ÇíË°®„Åó„Åæ„Åô„ÄÇ„Åó„Åü„Åå„Å£„Å¶„ÄÅÊ≠£„Åó„ÅÑÂâçÁΩÆË©û„ÅØ„Äåke„Äç„Åß„ÅØ„Å™„Åè„Äådi„Äç„Åß„Åô„ÄÇÊ≠£„Åó„ÅÑÊñá„ÅØ„ÄåMereka bermain di halaman„ÄçÔºàÂΩº„Çâ„ÅØÂ∫≠„ÅßÈÅä„Å∂Ôºâ„Åß„Åô„ÄÇÊñáA„ÄÅB„ÄÅC„ÅØ„Åô„Åß„Å´Ê≠£„Åó„Åè‰ΩøÁî®„Åï„Çå„Å¶„ÅÑ„Åæ„ÅôÔºö„Äåduduk di kursi„Äç„ÅØÂ∫ß„ÇãÂ†¥ÊâÄ„ÇíÁ§∫„Åó„ÄÅ„Äåpergi ke sekolah„Äç„ÅØÊñπÂêë„ÇíÁ§∫„Åó„ÄÅ„Äåmembaca di kamar„Äç„ÅØÊ¥ªÂãï„ÅÆÂ†¥ÊâÄ„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ"
            },
            {
                question: "Kata depan \"ke\" digunakan untuk menunjukkan...",
                translation: "The preposition \"ke\" is used to indicate...",
                answers: ["A. Tempat terjadinya sesuatu", "B. Kepemilikan", "C. Arah atau tujuan", "D. Keadaan"],
                correct: 2,
                explanation: "\"Ke\" digunakan untuk menyatakan arah atau tujuan suatu perpindahan. Misalnya, \"berangkat ke sekolah\", \"datang ke rumah nenek\", atau \"pergi ke pasar\". Opsi lainnya tidak tepat: A menunjukkan tempat, itu digunakan dengan \"di\". B tidak relevan. D tidak berhubungan langsung dengan kata depan \"ke\".",
                explanationJp: "„ÄåKe„Äç„ÅØÁßªÂãï„ÅÆÊñπÂêë„ÇÑÁõÆÁöÑÂú∞„ÇíË°®„Åô„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅ„Äåberangkat ke sekolah„ÄçÔºàÂ≠¶Ê†°„Å´Âá∫Áô∫„Åô„ÇãÔºâ„ÄÅ„Äådatang ke rumah nenek„ÄçÔºà„Åä„Å∞„ÅÇ„Å°„ÇÉ„Çì„ÅÆÂÆ∂„Å´Êù•„ÇãÔºâ„ÄÅ„Äåpergi ke pasar„ÄçÔºàÂ∏ÇÂ†¥„Å´Ë°å„ÅèÔºâ„Å™„Å©„Åß„Åô„ÄÇ‰ªñ„ÅÆÈÅ∏ÊäûËÇ¢„ÅØÈÅ©Âàá„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„ÇìÔºöA„ÅØÂ†¥ÊâÄ„ÇíÁ§∫„Åó„ÄÅ„Åù„Çå„ÅØ„Äådi„Äç„Å®‰∏ÄÁ∑í„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇB„ÅØÈñ¢ÈÄ£„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇD„ÅØÂâçÁΩÆË©û„Äåke„Äç„Å®Áõ¥Êé•Èñ¢‰øÇ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"
            },
            {
                question: "Manakah kalimat yang menggunakan \"di\" dan \"ke\" secara benar?",
                translation: "Which sentence uses \"di\" and \"ke\" correctly?",
                answers: ["A. Ibu pergi di pasar dan membeli sayur ke warung.", "B. Adik ke taman dan bermain di sana.", "C. Saya tidur di pergi ke kamar.", "D. Mereka berlari ke lalu di taman."],
                correct: 1,
                explanation: "Kalimat B benar: \"ke taman\" menunjukkan arah atau tujuan, \"bermain di sana\" menyatakan lokasi kegiatan. Kalimat A salah karena \"pergi\" membutuhkan kata depan \"ke\", bukan \"di\". Seharusnya \"pergi ke pasar\". Kalimat C tidak jelas secara struktur. Kalimat D tidak lengkap dan tidak logis secara tata bahasa.",
                explanationJp: "ÊñáB„ÅåÊ≠£„Åó„ÅÑ„Åß„ÅôÔºö„Äåke taman„ÄçÔºàÂÖ¨Âúí„Å∏Ôºâ„ÅØÊñπÂêë„ÇÑÁõÆÁöÑÂú∞„ÇíÁ§∫„Åó„ÄÅ„Äåbermain di sana„ÄçÔºà„Åù„Åì„ÅßÈÅä„Å∂Ôºâ„ÅØÊ¥ªÂãï„ÅÆÂ†¥ÊâÄ„ÇíË°®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÊñáA„ÅØ„Äåpergi„ÄçÔºàË°å„ÅèÔºâ„ÅåÂâçÁΩÆË©û„Äådi„Äç„Åß„ÅØ„Å™„Åè„Äåke„Äç„ÇíÂøÖË¶Å„Å®„Åô„Çã„Åü„ÇÅÈñìÈÅï„ÅÑ„Åß„Åô„ÄÇ„Äåpergi ke pasar„ÄçÔºàÂ∏ÇÂ†¥„Å´Ë°å„ÅèÔºâ„Åß„ÅÇ„Çã„Åπ„Åç„Åß„Åô„ÄÇÊñáC„ÅØÊßãÈÄ†„Åå‰∏çÊòéÁ¢∫„Åß„Åô„ÄÇÊñáD„ÅØ‰∏çÂÆåÂÖ®„ÅßÊñáÊ≥ïÁöÑ„Å´ÈùûË´ñÁêÜÁöÑ„Åß„Åô„ÄÇ"
            },
            {
                question: "Pilih kalimat yang benar!",
                translation: "Choose the correct sentence!",
                answers: ["A. Saya berjalan ke jalan.", "B. Buku itu jatuh ke meja.", "C. Kakak duduk ke sofa.", "D. Ibu tidur ke kamar."],
                correct: 0,
                explanation: "Kalimat A benar karena menunjukkan perpindahan atau gerakan menuju tempat, yaitu \"berjalan ke jalan\". Kalimat B terdengar janggal secara makna. Jika maksudnya buku berada di atas meja karena jatuh, maka seharusnya \"jatuh di meja\". Kalimat C dan D salah karena \"duduk\" dan \"tidur\" adalah kegiatan di tempat, bukan gerakan menuju tempat. Maka seharusnya: \"duduk di sofa\" dan \"tidur di kamar\".",
                explanationJp: "ÊñáA„ÅØÂ†¥ÊâÄ„Å∏„ÅÆÁßªÂãï„ÇÑÂãï„Åç„ÇíÁ§∫„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅÊ≠£„Åó„Åè„ÄÅ„Äåberjalan ke jalan„ÄçÔºàÈÅìË∑Ø„Å´Ê≠©„ÅèÔºâ„Åß„Åô„ÄÇÊñáB„ÅØÊÑèÂë≥ÁöÑ„Å´„Åä„Åã„Åó„ÅèËÅû„Åì„Åà„Åæ„Åô„ÄÇÊú¨„ÅåËêΩ„Å°„Å¶„ÉÜ„Éº„Éñ„É´„ÅÆ‰∏ä„Å´„ÅÇ„Çã„Å®„ÅÑ„ÅÜÊÑèÂë≥„Å™„Çâ„ÄÅ„Äåjatuh di meja„ÄçÔºà„ÉÜ„Éº„Éñ„É´„Å´ËêΩ„Å°„ÅüÔºâ„Åß„ÅÇ„Çã„Åπ„Åç„Åß„Åô„ÄÇÊñáC„Å®D„ÅØ„Äåduduk„ÄçÔºàÂ∫ß„ÇãÔºâ„Å®„Äåtidur„ÄçÔºàÁú†„ÇãÔºâ„ÅåÂ†¥ÊâÄ„Å∏„ÅÆÁßªÂãï„Åß„ÅØ„Å™„Åè„ÄÅ„Åù„ÅÆÂ†¥„Åß„ÅÆÊ¥ªÂãï„Åß„ÅÇ„Çã„Åü„ÇÅÈñìÈÅï„ÅÑ„Åß„Åô„ÄÇ„Åó„Åü„Åå„Å£„Å¶„Äåduduk di sofa„ÄçÔºà„ÇΩ„Éï„Ç°„Å´Â∫ß„ÇãÔºâ„Å®„Äåtidur di kamar„ÄçÔºàÈÉ®Â±ã„ÅßÁú†„ÇãÔºâ„Åß„ÅÇ„Çã„Åπ„Åç„Åß„Åô„ÄÇ"
            },
            {
                question: "Manakah kalimat yang menggunakan \"di\" untuk menyatakan lokasi?",
                translation: "Which sentence uses \"di\" to indicate location?",
                answers: ["A. Anak-anak bermain di halaman.", "B. Mereka ke bermain lapangan.", "C. Saya belajar ke meja.", "D. Ayah pergi di toko."],
                correct: 0,
                explanation: "Kalimat A benar karena menyatakan tempat terjadinya kegiatan bermain, yaitu halaman. Kalimat lainnya salah: Kalimat B salah struktur. Kalimat C seharusnya \"belajar di meja\", bukan \"ke meja\". Kalimat D seharusnya \"pergi ke toko\", karena \"pergi\" menyatakan arah, bukan lokasi.",
                explanationJp: "ÊñáA„ÅØÈÅä„Å∂Ê¥ªÂãï„ÅåË°å„Çè„Çå„ÇãÂ†¥ÊâÄ„ÄÅ„Å§„Åæ„ÇäÂ∫≠„ÇíË°®„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅÊ≠£„Åó„ÅÑ„Åß„Åô„ÄÇ‰ªñ„ÅÆÊñá„ÅØÈñìÈÅï„Å£„Å¶„ÅÑ„Åæ„ÅôÔºöÊñáB„ÅØÊßãÈÄ†„ÅåÈñìÈÅï„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇÊñáC„ÅØ„Äåke meja„Äç„Åß„ÅØ„Å™„Åè„Äåbelajar di meja„ÄçÔºàÊú∫„ÅßÂãâÂº∑„Åô„ÇãÔºâ„Åß„ÅÇ„Çã„Åπ„Åç„Åß„Åô„ÄÇÊñáD„ÅØ„Äåpergi„Äç„ÅåÂ†¥ÊâÄ„Åß„ÅØ„Å™„ÅèÊñπÂêë„ÇíË°®„Åô„Åü„ÇÅ„Äåpergi ke toko„ÄçÔºàÂ∫ó„Å´Ë°å„ÅèÔºâ„Åß„ÅÇ„Çã„Åπ„Åç„Åß„Åô„ÄÇ"
            },
            {
                question: "Lengkapi kalimat berikut: \"Adik berjalan ___ kamar dan duduk ___ lantai.\"",
                translation: "Complete the sentence: \"Adik berjalan ___ kamar dan duduk ___ lantai.\"",
                answers: ["A. di, ke", "B. ke, di", "C. ke, ke", "D. di, di"],
                correct: 1,
                explanation: "\"berjalan ke kamar\" menunjukkan arah dan \"duduk di lantai\" menunjukkan tempat. Jadi kombinasi yang tepat adalah \"ke, di\". Kalimat lengkapnya: \"Adik berjalan ke kamar dan duduk di lantai\".",
                explanationJp: "„Äåberjalan ke kamar„ÄçÔºàÈÉ®Â±ã„Å´Ê≠©„ÅèÔºâ„ÅØÊñπÂêë„ÇíÁ§∫„Åó„ÄÅ„Äåduduk di lantai„ÄçÔºàÂ∫ä„Å´Â∫ß„ÇãÔºâ„ÅØÂ†¥ÊâÄ„ÇíÁ§∫„Åó„Åæ„Åô„ÄÇ„Åó„Åü„Åå„Å£„Å¶Ê≠£„Åó„ÅÑÁµÑ„ÅøÂêà„Çè„Åõ„ÅØ„Äåke, di„Äç„Åß„Åô„ÄÇÂÆåÂÖ®„Å™ÊñáÔºö„ÄåAdik berjalan ke kamar dan duduk di lantai„ÄçÔºàÂºü/Â¶π„ÅØÈÉ®Â±ã„Å´Ê≠©„ÅÑ„Å¶Ë°å„Åç„ÄÅÂ∫ä„Å´Â∫ß„ÇãÔºâ„ÄÇ"
            },
            {
                question: "Manakah kalimat yang benar secara struktur dan penggunaan kata depan?",
                translation: "Which sentence is correct in structure and preposition usage?",
                answers: ["A. Kakek berdiri ke pintu.", "B. Burung terbang di langit.", "C. Dia melompat ke kursi dan duduk ke sana.", "D. Saya ke makan di meja."],
                correct: 1,
                explanation: "\"Burung terbang di langit\" menggunakan \"di\" dengan tepat karena menunjukkan tempat berlangsungnya kegiatan terbang. Kalimat A salah karena \"berdiri\" adalah aktivitas yang terjadi di tempat, seharusnya \"di pintu\". Kalimat C salah karena \"duduk ke sana\" tidak tepat, seharusnya \"duduk di sana\". Kalimat D salah secara struktur kalimat dan penggunaan kata depan.",
                explanationJp: "„ÄåBurung terbang di langit„ÄçÔºàÈ≥•„ÅåÁ©∫„ÇíÈ£õ„Å∂Ôºâ„ÅØÈ£õ„Å∂Ê¥ªÂãï„ÅåË°å„Çè„Çå„ÇãÂ†¥ÊâÄ„ÇíÁ§∫„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅ„Äådi„Äç„ÇíÊ≠£„Åó„Åè‰ΩøÁî®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÊñáA„ÅØ„Äåberdiri„ÄçÔºàÁ´ã„Å§Ôºâ„Åå„Åù„ÅÆÂ†¥„ÅßËµ∑„Åì„ÇãÊ¥ªÂãï„Å™„ÅÆ„ÅßÈñìÈÅï„ÅÑ„Åß„ÄÅ„Äådi pintu„ÄçÔºà„Éâ„Ç¢„ÅÆ„Å®„Åì„Çç„ÅßÔºâ„Åß„ÅÇ„Çã„Åπ„Åç„Åß„Åô„ÄÇÊñáC„ÅØ„Äåduduk ke sana„Äç„ÅåÈñìÈÅï„ÅÑ„Åß„ÄÅ„Äåduduk di sana„ÄçÔºà„Åù„Åì„Å´Â∫ß„ÇãÔºâ„Åß„ÅÇ„Çã„Åπ„Åç„Åß„Åô„ÄÇÊñáD„ÅØÊñáÊßãÈÄ†„Å®ÂâçÁΩÆË©û„ÅÆ‰ΩøÁî®„ÅåÈñìÈÅï„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ"
            },
            {
                question: "Lengkapi kalimat berikut: \"Kami pergi ___ rumah nenek, lalu makan ___ dapur.\"",
                translation: "Complete the sentence: \"Kami pergi ___ rumah nenek, lalu makan ___ dapur.\"",
                answers: ["A. ke, ke", "B. di, di", "C. ke, di", "D. di, ke"],
                correct: 2,
                explanation: "\"pergi ke rumah nenek\" menunjukkan arah dan \"makan di dapur\" menunjukkan tempat berlangsungnya kegiatan. Kalimat yang benar: \"Kami pergi ke rumah nenek, lalu makan di dapur\". Penggunaan \"ke\" dan \"di\" harus disesuaikan dengan fungsi kata kerja: Kata kerja berpindah tempat (seperti pergi, datang) ‚Üí gunakan \"ke\". Kata kerja aktivitas di tempat (seperti duduk, makan) ‚Üí gunakan \"di\".",
                explanationJp: "„Äåpergi ke rumah nenek„ÄçÔºà„Åä„Å∞„ÅÇ„Å°„ÇÉ„Çì„ÅÆÂÆ∂„Å´Ë°å„ÅèÔºâ„ÅØÊñπÂêë„ÇíÁ§∫„Åó„ÄÅ„Äåmakan di dapur„ÄçÔºàÂè∞ÊâÄ„ÅßÈ£ü„Åπ„ÇãÔºâ„ÅØÊ¥ªÂãï„ÅåË°å„Çè„Çå„ÇãÂ†¥ÊâÄ„ÇíÁ§∫„Åó„Åæ„Åô„ÄÇÊ≠£„Åó„ÅÑÊñáÔºö„ÄåKami pergi ke rumah nenek, lalu makan di dapur„ÄçÔºàÁßÅ„Åü„Å°„ÅØ„Åä„Å∞„ÅÇ„Å°„ÇÉ„Çì„ÅÆÂÆ∂„Å´Ë°å„Åç„ÄÅ„Åù„Çå„Åã„ÇâÂè∞ÊâÄ„ÅßÈ£ü„Åπ„ÇãÔºâ„ÄÇ„Äåke„Äç„Å®„Äådi„Äç„ÅÆ‰ΩøÁî®„ÅØÂãïË©û„ÅÆÊ©üËÉΩ„Å´Âêà„Çè„Åõ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„ÅôÔºöÁßªÂãïÂãïË©ûÔºàpergi„ÄÅdatang„Å™„Å©Ôºâ‚Üí„Äåke„Äç„Çí‰ΩøÁî®„ÄÇÂ†¥ÊâÄ„Åß„ÅÆÊ¥ªÂãïÂãïË©ûÔºàduduk„ÄÅmakan„Å™„Å©Ôºâ‚Üí„Äådi„Äç„Çí‰ΩøÁî®„ÄÇ"
            }
        ];

        let currentQuestion = 0;
        let hearts = 5;
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let playerName = "";
        let backgroundMusic = null;
        let questionTimer = null;
        let timeLeft = 60;
        let currentLanguage = 'id';
        
        // Custom Audio Files
        let correctSound = null;
        let wrongSound = null;
        let successSound = null;
        let failedSound = null;

        window.onload = function() {
            initCustomAudio();
            initCustomCursor();
            initMatrixRain();
        };
        
        function triggerScreenShake() {
            document.body.classList.add('screen-shake');
            setTimeout(() => {
                document.body.classList.remove('screen-shake');
            }, 600);
        }
        
        function initMatrixRain() {
            const matrixContainer = document.getElementById('matrixRain');
            const chars = '01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà„Éä„Éã„Éå„Éç„Éé„Éè„Éí„Éï„Éò„Éõ„Éû„Éü„É†„É°„É¢„É§„É¶„É®„É©„É™„É´„É¨„É≠„ÉØ„É≤„É≥';
            
            function createMatrixChar() {
                const char = document.createElement('div');
                char.className = 'matrix-char';
                char.textContent = chars[Math.floor(Math.random() * chars.length)];
                char.style.left = Math.random() * 100 + '%';
                char.style.animationDuration = (Math.random() * 3 + 2) + 's';
                char.style.animationDelay = Math.random() * 2 + 's';
                
                matrixContainer.appendChild(char);
                
                setTimeout(() => {
                    if (char.parentNode) {
                        char.parentNode.removeChild(char);
                    }
                }, 5000);
            }
            
            setInterval(() => {
                for (let i = 0; i < 3; i++) {
                    createMatrixChar();
                }
            }, 50);
        }
        
        function createPixelExplosion(centerX, centerY) {
            const colors = ['#ff0040', '#ffff00', '#00ff41', '#00ffff', '#ff4080', '#8040ff'];
            const shapes = [
                'polygon(0 0, 100% 0, 100% 100%, 0 100%)',
                'polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)',
                'polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)',
            ];
            
            const pixelCount = Math.random() * 30 + 50;
            
            for (let i = 0; i < pixelCount; i++) {
                const pixel = document.createElement('div');
                pixel.className = 'pixel-explosion';
                
                const color = colors[Math.floor(Math.random() * colors.length)];
                const shape = shapes[Math.floor(Math.random() * shapes.length)];
                
                pixel.style.background = color;
                pixel.style.clipPath = shape;
                pixel.style.boxShadow = `0 0 15px ${color}`;
                
                const size = Math.random() * 12 + 8;
                pixel.style.width = size + 'px';
                pixel.style.height = size + 'px';
                
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * 200 + 50;
                const startX = centerX + Math.cos(angle) * 50;
                const startY = centerY + Math.sin(angle) * 50;
                const endX = centerX + Math.cos(angle) * distance;
                const endY = centerY + Math.sin(angle) * distance;
                
                pixel.style.left = startX + 'px';
                pixel.style.top = startY + 'px';
                
                document.body.appendChild(pixel);
                
                pixel.animate([
                    {
                        transform: `translate(0, 0) scale(1) rotate(0deg)`,
                        opacity: 1
                    },
                    {
                        transform: `translate(${endX - startX}px, ${endY - startY}px) scale(0) rotate(${Math.random() * 720}deg)`,
                        opacity: 0
                    }
                ], {
                    duration: 2000,
                    easing: 'ease-out'
                });
                
                setTimeout(() => {
                    if (pixel.parentNode) {
                        pixel.parentNode.removeChild(pixel);
                    }
                }, 2000);
            }
        }

        function initCustomCursor() {
            const cursor = document.getElementById('customCursor');
            
            document.addEventListener('mousemove', (e) => {
                cursor.style.left = e.clientX - 12 + 'px';
                cursor.style.top = e.clientY - 12 + 'px';
            });
            
            document.addEventListener('mousedown', (e) => {
                cursor.classList.add('cursor-clicking');
                createClickParticles(e.clientX, e.clientY);
                
                setTimeout(() => {
                    cursor.classList.remove('cursor-clicking');
                }, 200);
            });
            
            document.addEventListener('mouseleave', () => {
                cursor.style.opacity = '0';
            });
            
            document.addEventListener('mouseenter', () => {
                cursor.style.opacity = '1';
            });
        }

        function createClickParticles(x, y) {
            const colors = ['#ff0040', '#ffff00', '#00ff41', '#00ffff', '#ff4080', '#8040ff'];
            const shapes = [
                'polygon(0 0, 100% 0, 100% 100%, 0 100%)',
                'polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)',
                'polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)',
                'polygon(0 0, 100% 0, 100% 75%, 75% 75%, 75% 100%, 50% 100%, 50% 75%, 25% 75%, 25% 50%, 0 50%)'
            ];
            
            const particleCount = Math.random() * 4 + 8;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'click-particle';
                
                const color = colors[Math.floor(Math.random() * colors.length)];
                const shape = shapes[Math.floor(Math.random() * shapes.length)];
                
                particle.style.background = color;
                particle.style.clipPath = shape;
                particle.style.boxShadow = `0 0 10px ${color}`;
                
                const size = Math.random() * 8 + 6;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                
                particle.style.left = (x - size/2) + 'px';
                particle.style.top = (y - size/2) + 'px';
                
                const angle = (Math.PI * 2 * i) / particleCount + (Math.random() - 0.5) * 0.5;
                const distance = Math.random() * 60 + 30;
                const endX = x + Math.cos(angle) * distance;
                const endY = y + Math.sin(angle) * distance;
                
                document.body.appendChild(particle);
                
                particle.animate([
                    {
                        transform: `translate(0, 0) scale(1) rotate(0deg)`,
                        opacity: 1
                    },
                    {
                        transform: `translate(${endX - x}px, ${endY - y}px) scale(0) rotate(${Math.random() * 360}deg)`,
                        opacity: 0
                    }
                ], {
                    duration: 800,
                    easing: 'ease-out'
                });
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                }, 800);
            }
        }

        function initCustomAudio() {
            // Initialize background music
            backgroundMusic = new Audio();
            backgroundMusic.src = 'ryuukoi.mp3'; // Replace with your background music file
            backgroundMusic.loop = true;
            backgroundMusic.volume = 0.2;
            
            // Initialize sound effects
            correctSound = new Audio();
            correctSound.src = 'correct.mp3'; // Replace with your correct sound file
            correctSound.volume = 0.2;
            
            wrongSound = new Audio();
            wrongSound.src = 'wrong.mp3'; // Replace with your wrong sound file
            wrongSound.volume = 0.6;
            
            successSound = new Audio();
            successSound.src = 'success.mp3'; // Replace with your success sound file
            successSound.volume = 0.5;
            
            failedSound = new Audio();
            failedSound.src = 'failed.mp3'; // Replace with your failed sound file
            failedSound.volume = 0.5;
            
            console.log('Custom audio initialized');
        }

        function playCorrectSound() {
            try {
                if (correctSound) {
                    correctSound.currentTime = 0;
                    correctSound.play();
                }
            } catch (error) {
                console.log('Correct sound failed:', error);
            }
        }

        function playWrongSound() {
            try {
                if (wrongSound) {
                    wrongSound.currentTime = 0;
                    wrongSound.play();
                }
            } catch (error) {
                console.log('Wrong sound failed:', error);
            }
        }

        function playWinningSound() {
            try {
                if (successSound) {
                    successSound.currentTime = 0;
                    successSound.play();
                }
            } catch (error) {
                console.log('Success sound failed:', error);
            }
        }

        function playFailedSound() {
            try {
                if (failedSound) {
                    failedSound.currentTime = 0;
                    failedSound.play();
                }
            } catch (error) {
                console.log('Failed sound failed:', error);
            }
        }

        function playBackgroundMusic() {
            try {
                if (backgroundMusic) {
                    backgroundMusic.play();
                }
            } catch (error) {
                console.log('Background music failed:', error);
            }
        }

        function pauseBackgroundMusic() {
            try {
                if (backgroundMusic) {
                    backgroundMusic.pause();
                }
            } catch (error) {
                console.log('Background music pause failed:', error);
            }
        }

        function stopBackgroundMusic() {
            try {
                if (backgroundMusic) {
                    backgroundMusic.pause();
                    backgroundMusic.currentTime = 0;
                }
            } catch (error) {
                console.log('Background music stop failed:', error);
            }
        }

        function toggleBackgroundMusic() {
            try {
                if (backgroundMusic) {
                    if (backgroundMusic.paused) {
                        backgroundMusic.play();
                        return true;
                    } else {
                        backgroundMusic.pause();
                        return false;
                    }
                }
                return false;
            } catch (error) {
                console.log('Background music toggle failed:', error);
                return false;
            }
        }

        function toggleMusicControl() {
            const musicButton = document.getElementById('musicToggle');
            const isPlaying = toggleBackgroundMusic();
            
            if (isPlaying) {
                musicButton.innerHTML = 'üéµ ON';
                musicButton.classList.remove('bg-red-600');
                musicButton.classList.add('bg-blue-600');
            } else {
                musicButton.innerHTML = 'üîá OFF';
                musicButton.classList.remove('bg-blue-600');
                musicButton.classList.add('bg-red-600');
            }
        }

        function startQuestionTimer() {
            timeLeft = 60;
            updateTimerDisplay();
            
            questionTimer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                const timerDisplay = document.getElementById('timerDisplay');
                const timerContainer = timerDisplay.parentElement;
                
                if (timeLeft <= 10) {
                    timerContainer.classList.remove('bg-red-600');
                    timerContainer.classList.add('bg-red-800');
                    timerDisplay.classList.add('animate-pulse');
                    timerDisplay.style.color = '#ff0000';
                } else if (timeLeft <= 30) {
                    timerContainer.classList.remove('bg-red-600');
                    timerContainer.classList.add('bg-orange-600');
                    timerDisplay.style.color = '#ffff00';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(questionTimer);
                    handleTimeUp();
                }
            }, 1000);
        }

        function stopQuestionTimer() {
            if (questionTimer) {
                clearInterval(questionTimer);
                questionTimer = null;
            }
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timerDisplay').textContent = display;
        }

        function handleTimeUp() {
            const buttons = document.querySelectorAll('#answersContainer button');
            buttons.forEach(btn => btn.disabled = true);
            
            const question = questions[currentQuestion];
            buttons[question.correct].classList.remove('bg-black', 'border-yellow-400');
            buttons[question.correct].classList.add('bg-green-600', 'border-green-400', 'text-white');
            buttons[question.correct].style.boxShadow = '0 0 15px #10b981';
            
            wrongAnswers++;
            loseHeart();
            playWrongSound();
            triggerScreenShake();
            
            const timerDisplay = document.getElementById('timerDisplay');
            timerDisplay.textContent = 'TIME UP!';
            timerDisplay.style.color = '#ff0000';
            
            setTimeout(() => {
                showExplanation(false, question);
            }, 2000);
        }

        function startQuiz() {
            const nameInput = document.getElementById('playerName');
            if (nameInput.value.trim() === '') {
                alert('Silakan masukkan nama Anda terlebih dahulu!');
                return;
            }
            
            playerName = nameInput.value.trim();
            document.getElementById('displayName').textContent = playerName;
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('quizScreen').classList.remove('hidden');
            
            playBackgroundMusic();
            showQuestion();
        }

        function toggleExplanationLanguage() {
            const languageButton = document.getElementById('languageToggle');
            const explanationText = document.getElementById('explanationText');
            const currentQuestionData = questions[currentQuestion];
            
            if (currentLanguage === 'id') {
                currentLanguage = 'jp';
                languageButton.innerHTML = 'üáØüáµ JP';
                explanationText.textContent = currentQuestionData.explanationJp;
            } else {
                currentLanguage = 'id';
                languageButton.innerHTML = 'üáÆüá© ID';
                explanationText.textContent = currentQuestionData.explanation;
            }
        }

        function showQuestion() {
            if (hearts <= 0) {
                showGameOver();
                return;
            }
            if (currentQuestion >= questions.length) {
                showResults();
                return;
            }

            stopQuestionTimer();

            const question = questions[currentQuestion];
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('questionTranslation').textContent = question.translation;
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            document.getElementById('totalQuestions').textContent = questions.length;
            
            const timerDisplay = document.getElementById('timerDisplay');
            const timerContainer = timerDisplay.parentElement;
            timerContainer.className = 'bg-red-600 border-2 border-yellow-400 px-6 py-3 text-center';
            timerContainer.style.boxShadow = '0 0 15px #ff0040';
            timerDisplay.classList.remove('animate-pulse');
            timerDisplay.style.color = '#ffffff';
            
            const container = document.getElementById('answersContainer');
            container.innerHTML = '';
            
            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'bg-black border-2 border-yellow-400 text-white hover:bg-yellow-600 hover:text-black p-4 text-left font-medium transition-all duration-200 transform hover:scale-105';
                button.style.boxShadow = '0 0 10px #fbbf24';
                button.textContent = answer;
                button.onclick = () => selectAnswer(index);
                container.appendChild(button);
            });

            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            startQuestionTimer();
        }

        function selectAnswer(selectedIndex) {
            stopQuestionTimer();
            
            const question = questions[currentQuestion];
            const buttons = document.querySelectorAll('#answersContainer button');
            
            buttons.forEach(btn => btn.disabled = true);
            
            let isCorrect = false;
            
            if (selectedIndex === question.correct) {
                buttons[selectedIndex].classList.remove('bg-black', 'border-yellow-400');
                buttons[selectedIndex].classList.add('bg-green-600', 'border-green-400', 'text-white');
                buttons[selectedIndex].style.boxShadow = '0 0 15px #10b981';
                correctAnswers++;
                playCorrectSound();
                isCorrect = true;
            } else {
                buttons[selectedIndex].classList.remove('bg-black', 'border-yellow-400');
                buttons[selectedIndex].classList.add('bg-red-600', 'border-red-400', 'text-white');
                buttons[selectedIndex].style.boxShadow = '0 0 15px #ef4444';
                
                buttons[question.correct].classList.remove('bg-black', 'border-yellow-400');
                buttons[question.correct].classList.add('bg-green-600', 'border-green-400', 'text-white');
                buttons[question.correct].style.boxShadow = '0 0 15px #10b981';
                
                wrongAnswers++;
                loseHeart();
                playWrongSound();
                triggerScreenShake();
                isCorrect = false;
            }
            
            setTimeout(() => {
                showExplanation(isCorrect, question);
            }, 1500);
        }

        function showExplanation(isCorrect, question) {
            const popup = document.getElementById('explanationPopup');
            const icon = document.getElementById('explanationIcon');
            const title = document.getElementById('explanationTitle');
            const text = document.getElementById('explanationText');
            const continueBtn = document.getElementById('continueButton');
            const languageButton = document.getElementById('languageToggle');
            
            if (isCorrect) {
                icon.textContent = '‚úÖ';
                title.textContent = 'Jawaban Benar!';
                title.className = 'text-2xl font-bold text-green-400 mb-4';
                continueBtn.className = 'w-full bg-green-600 border-2 border-yellow-400 text-white font-semibold py-3 px-6 hover:bg-green-700 transform hover:scale-105 transition-all duration-200';
                continueBtn.style.boxShadow = '0 0 15px #10b981';
            } else {
                icon.textContent = '‚ùå';
                title.textContent = 'Jawaban Salah!';
                title.className = 'text-2xl font-bold text-red-400 mb-4';
                continueBtn.className = 'w-full bg-red-600 border-2 border-yellow-400 text-white font-semibold py-3 px-6 hover:bg-red-700 transform hover:scale-105 transition-all duration-200';
                continueBtn.style.boxShadow = '0 0 15px #ef4444';
            }
            
            currentLanguage = 'id';
            languageButton.innerHTML = 'üáÆüá© ID';
            
            text.textContent = question.explanation;
            popup.classList.remove('hidden');
        }

        function continueToNextQuestion() {
            document.getElementById('explanationPopup').classList.add('hidden');
            currentQuestion++;
            showQuestion();
        }

        function loseHeart() {
            hearts--;
            const heartsContainer = document.getElementById('hearts');
            const heartElements = heartsContainer.children;
            
            if (hearts >= 0 && hearts < heartElements.length) {
                heartElements[heartElements.length - 1 - (4 - hearts)].textContent = 'üíî';
                heartElements[heartElements.length - 1 - (4 - hearts)].classList.add('heart-bounce');
            }
        }

        function showGameOver() {
            document.getElementById('quizScreen').classList.add('hidden');
            document.getElementById('gameOverPopup').classList.remove('hidden');
            
            stopQuestionTimer();
            stopBackgroundMusic();
            
            document.getElementById('gameOverCorrect').textContent = correctAnswers;
            document.getElementById('gameOverWrong').textContent = wrongAnswers;
            
            playFailedSound();
        }

        function restartFromGameOver() {
            document.getElementById('gameOverPopup').classList.add('hidden');
            restartQuiz();
        }

        function showResults() {
            document.getElementById('quizScreen').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');
            
            stopQuestionTimer();
            stopBackgroundMusic();
            
            setTimeout(() => {
                createPixelExplosion(window.innerWidth / 2, window.innerHeight / 2);
            }, 500);
            
            const totalQuestions = correctAnswers + wrongAnswers;
            const percentage = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;
            
            document.getElementById('finalName').textContent = playerName;
            document.getElementById('correctCount').textContent = correctAnswers;
            document.getElementById('wrongCount').textContent = wrongAnswers;
            document.getElementById('percentage').textContent = percentage + '%';
            
            const resultIcon = document.getElementById('resultIcon');
            if (percentage >= 80) {
                resultIcon.textContent = 'üèÜ';
                playWinningSound();
            } else if (percentage >= 60) {
                resultIcon.textContent = 'üéâ';
                playWinningSound();
            } else if (percentage >= 40) {
                resultIcon.textContent = 'üëç';
            } else {
                resultIcon.textContent = 'üí™';
            }
        }

        function saveResultImage() {
            try {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 800;
                canvas.height = 600;
                
                const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, '#1a1a2e');
                gradient.addColorStop(0.25, '#16213e');
                gradient.addColorStop(0.5, '#0f3460');
                gradient.addColorStop(0.75, '#533483');
                gradient.addColorStop(1, '#e94560');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = '#00ff41';
                ctx.fillRect(50, 50, 20, 20);
                ctx.fillRect(730, 530, 20, 20);
                
                ctx.fillStyle = '#ff0040';
                ctx.fillRect(700, 80, 15, 15);
                ctx.fillRect(80, 520, 15, 15);
                
                ctx.fillStyle = '#ffff00';
                ctx.fillRect(650, 150, 25, 25);
                ctx.fillRect(125, 450, 25, 25);
                
                ctx.fillStyle = '#00ffff';
                ctx.font = 'bold 36px monospace';
                ctx.textAlign = 'center';
                ctx.fillText('üìö HASIL KUIS KATA DEPAN', canvas.width/2, 80);
                
                ctx.fillStyle = '#ffff00';
                ctx.font = 'bold 24px monospace';
                ctx.fillText(`PLAYER: ${playerName.toUpperCase()}`, canvas.width/2, 130);
                
                ctx.fillStyle = '#000000';
                ctx.fillRect(100, 180, 600, 300);
                ctx.strokeStyle = '#00ffff';
                ctx.lineWidth = 4;
                ctx.strokeRect(100, 180, 600, 300);
                
                ctx.fillStyle = '#00ff41';
                ctx.font = 'bold 20px monospace';
                ctx.fillText('=== STATISTIK GAME ===', canvas.width/2, 220);
                
                ctx.fillStyle = '#ffffff';
                ctx.font = '18px monospace';
                ctx.fillText(`JAWABAN BENAR: ${correctAnswers}`, canvas.width/2, 270);
                ctx.fillText(`JAWABAN SALAH: ${wrongAnswers}`, canvas.width/2, 310);
                
                const totalQuestions = correctAnswers + wrongAnswers;
                const percentage = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;
                
                ctx.fillStyle = '#ffff00';
                ctx.font = 'bold 24px monospace';
                ctx.fillText(`SKOR AKHIR: ${percentage}%`, canvas.width/2, 360);
                
                let message = '';
                if (percentage >= 80) message = 'EXCELLENT! üèÜ';
                else if (percentage >= 60) message = 'GOOD JOB! üéâ';
                else if (percentage >= 40) message = 'NOT BAD! üëç';
                else message = 'KEEP TRYING! üí™';
                
                ctx.fillStyle = '#ff0040';
                ctx.font = 'bold 16px monospace';
                ctx.fillText(message, canvas.width/2, 400);
                
                ctx.fillStyle = '#888888';
                ctx.font = '12px monospace';
                ctx.fillText('Created by Hazu', canvas.width/2, 450);
                
                canvas.toBlob(function(blob) {
                    const link = document.createElement('a');
                    link.download = `kuis-ke-1-${playerName.replace(/\s+/g, '-')}.png`;
                    link.href = URL.createObjectURL(blob);
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(link.href);
                });
                
            } catch (error) {
                console.error('Error saving image:', error);
                alert('Maaf, terjadi kesalahan saat menyimpan gambar. Silakan coba lagi.');
            }
        }

        function showAllExplanations() {
            const popup = document.getElementById('allExplanationsPopup');
            const content = document.getElementById('allExplanationsContent');
            const languageButton = document.getElementById('allExplanationsLanguageToggle');
            
            // Reset language to Indonesian
            currentLanguage = 'id';
            languageButton.innerHTML = 'üáÆüá© ID';
            
            content.innerHTML = '';
            
            questions.forEach((question, index) => {
                const explanationDiv = document.createElement('div');
                explanationDiv.className = 'bg-gray-900 border-2 border-cyan-400 p-4 mb-4';
                explanationDiv.style.boxShadow = 'inset 0 0 15px #06b6d4';
                
                explanationDiv.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <div class="text-yellow-400 font-bold">üìù Pertanyaan ${index + 1}:</div>
                    </div>
                    <div class="text-white text-sm mb-3">${question.question}</div>
                    <div class="text-gray-400 text-xs mb-3 italic">${question.translation}</div>
                    <div class="text-green-400 font-bold mb-2">‚úÖ Jawaban Benar: ${question.answers[question.correct]}</div>
                    <div class="text-cyan-400 font-bold mb-2">üí° Penjelasan:</div>
                    <div class="explanation-text text-white text-sm leading-relaxed">${question.explanation}</div>
                `;
                
                content.appendChild(explanationDiv);
            });
            
            popup.classList.remove('hidden');
        }

        function toggleAllExplanationsLanguage() {
            const languageButton = document.getElementById('allExplanationsLanguageToggle');
            const explanationTexts = document.querySelectorAll('.explanation-text');
            
            if (currentLanguage === 'id') {
                currentLanguage = 'jp';
                languageButton.innerHTML = 'üáØüáµ JP';
                explanationTexts.forEach((text, index) => {
                    text.textContent = questions[index].explanationJp;
                });
            } else {
                currentLanguage = 'id';
                languageButton.innerHTML = 'üáÆüá© ID';
                explanationTexts.forEach((text, index) => {
                    text.textContent = questions[index].explanation;
                });
            }
        }

        function closeAllExplanations() {
            document.getElementById('allExplanationsPopup').classList.add('hidden');
        }

        function restartQuiz() {
            currentQuestion = 0;
            hearts = 5;
            correctAnswers = 0;
            wrongAnswers = 0;
            
            stopQuestionTimer();
            stopBackgroundMusic();
            
            const musicButton = document.getElementById('musicToggle');
            if (musicButton) {
                musicButton.innerHTML = 'ON';
                musicButton.classList.remove('bg-red-600');
                musicButton.classList.add('bg-blue-600');
            }
            
            const heartsContainer = document.getElementById('hearts');
            Array.from(heartsContainer.children).forEach(heart => {
                heart.textContent = '‚ù§Ô∏è';
                heart.classList.remove('heart-bounce');
            });
            
            document.getElementById('resultScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
            
            document.getElementById('playerName').value = '';
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9671e5b4023ca03f',t:'MTc1Mzg0NzQ4My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
