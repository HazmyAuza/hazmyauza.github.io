<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuis Interaktif</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        body {
            font-family: 'Press Start 2P', monospace;
            image-rendering: pixelated;
        }
        .heart-bounce {
            animation: heartBeat 0.5s ease-in-out;
        }
        @keyframes heartBeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="min-h-screen relative overflow-hidden" style="background: linear-gradient(45deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #533483 75%, #e94560 100%);">
    <!-- 8-bit Pixel Grid -->
    <div class="absolute inset-0 opacity-20">
        <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <pattern id="pixelGrid" width="20" height="20" patternUnits="userSpaceOnUse">
                    <rect width="20" height="20" fill="none" stroke="#00ff41" stroke-width="0.5"/>
                </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#pixelGrid)" />
        </svg>
    </div>
    
    <!-- 8-bit Floating Elements -->
    <div class="absolute top-10 left-10 w-16 h-16 bg-yellow-400 animate-bounce" style="clip-path: polygon(0 0, 100% 0, 100% 75%, 75% 75%, 75% 100%, 50% 100%, 50% 75%, 25% 75%, 25% 50%, 0 50%);"></div>
    <div class="absolute top-32 right-20 w-12 h-12 bg-red-500 animate-pulse" style="clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);"></div>
    <div class="absolute bottom-20 left-32 w-14 h-14 bg-green-400 animate-bounce" style="clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%, 0% 20%);"></div>
    <div class="absolute bottom-40 right-16 w-18 h-18 bg-blue-400 animate-pulse" style="clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);"></div>
    
    <!-- 8-bit Geometric Shapes -->
    <div class="absolute top-1/4 left-1/4">
        <div class="w-8 h-8 bg-cyan-400 animate-spin" style="clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);"></div>
    </div>
    <div class="absolute top-3/4 right-1/3">
        <div class="w-6 h-6 bg-pink-400 animate-bounce" style="clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);"></div>
    </div>
    <!-- Start Screen -->
    <div id="startScreen" class="min-h-screen flex items-center justify-center p-4 relative z-10">
        <div class="bg-black border-4 border-cyan-400 p-8 max-w-md w-full text-center fade-in" style="box-shadow: 0 0 20px #00ff41;">
            <div class="mb-6">
                <h1 id="quizTitle" class="text-2xl font-bold text-cyan-400 mb-2">üß† Kuis Pintar</h1>
                <p id="quizSubtitle" class="text-green-400">Uji pengetahuan Anda!</p>
            </div>
            
            <div class="mb-6">
                <label class="block text-left text-yellow-400 font-medium mb-2">Masukkan Nama Anda:</label>
                <input type="text" id="playerName" class="w-full px-4 py-3 bg-black border-2 border-green-400 text-white focus:border-cyan-400 focus:outline-none transition-colors" placeholder="Nama Anda..." style="box-shadow: inset 0 0 10px #00ff41;">
            </div>
            
            <button onclick="startQuiz()" class="w-full bg-red-600 border-2 border-yellow-400 text-white font-semibold py-3 px-6 hover:bg-red-700 transform hover:scale-105 transition-all duration-200" style="box-shadow: 0 0 15px #ff0040;">
                Mulai Kuis üöÄ
            </button>
        </div>
    </div>

    <!-- Quiz Screen -->
    <div id="quizScreen" class="min-h-screen p-4 hidden relative z-10">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="bg-black border-4 border-purple-400 p-6 mb-6" style="box-shadow: 0 0 20px #8b5cf6;">
                <div class="flex justify-between items-center">
                    <div>
                        <h2 class="text-lg font-bold text-cyan-400">Halo, <span id="displayName" class="text-yellow-400"></span>!</h2>
                        <p class="text-green-400">Pertanyaan <span id="questionNumber">1</span> dari <span id="totalQuestions">5</span></p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-red-400 font-medium">Nyawa:</span>
                        <div id="hearts" class="flex space-x-1">
                            <span class="text-2xl">‚ù§Ô∏è</span>
                            <span class="text-2xl">‚ù§Ô∏è</span>
                            <span class="text-2xl">‚ù§Ô∏è</span>
                            <span class="text-2xl">‚ù§Ô∏è</span>
                            <span class="text-2xl">‚ù§Ô∏è</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question Card -->
            <div class="bg-black border-4 border-green-400 p-8 mb-6 fade-in" style="box-shadow: 0 0 20px #10b981;">
                <h3 id="questionText" class="text-xl font-bold text-white mb-4 text-center"></h3>
                <p id="englishText" class="text-sm text-gray-400 mb-8 text-center italic"></p>
                
                <div id="answersContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Answers will be inserted here -->
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="bg-black border-4 border-blue-400 p-4" style="box-shadow: 0 0 20px #3b82f6;">
                <div class="w-full bg-gray-800 h-4 border-2 border-white">
                    <div id="progressBar" class="bg-green-400 h-full transition-all duration-500" style="width: 20%; box-shadow: 0 0 10px #10b981;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Over Popup -->
    <div id="gameOverPopup" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-black border-4 border-red-400 p-8 max-w-md w-full text-center fade-in" style="box-shadow: 0 0 30px #ef4444;">
            <div class="mb-6">
                <div class="text-6xl mb-4">üíÄ</div>
                <h2 class="text-2xl font-bold text-red-400 mb-2">GAME OVER!</h2>
                <p class="text-white">Anda gagal karena kehabisan nyawa</p>
                <p class="text-gray-400 text-sm mt-2">Nyawa: 0/5 ‚ù§Ô∏è</p>
            </div>
            
            <div class="bg-gray-900 border-2 border-red-400 p-4 mb-6" style="box-shadow: inset 0 0 15px #ef4444;">
                <div class="text-center">
                    <div class="text-lg font-bold text-yellow-400 mb-2">Statistik Terakhir:</div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center">
                            <div class="text-xl font-bold text-green-400" id="gameOverCorrect">0</div>
                            <div class="text-xs text-green-400">Benar</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xl font-bold text-red-400" id="gameOverWrong">0</div>
                            <div class="text-xs text-red-400">Salah</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button onclick="restartFromGameOver()" class="w-full bg-red-600 border-2 border-yellow-400 text-white font-semibold py-3 px-6 hover:bg-red-700 transform hover:scale-105 transition-all duration-200" style="box-shadow: 0 0 15px #ff0040;">
                Coba Lagi üîÑ
            </button>
        </div>
    </div>

    <!-- Result Screen -->
    <div id="resultScreen" class="min-h-screen flex items-center justify-center p-4 hidden relative z-10">
        <div class="bg-black border-4 border-cyan-400 p-8 max-w-md w-full text-center fade-in" style="box-shadow: 0 0 20px #00ff41;">
            <div class="mb-6">
                <div id="resultIcon" class="text-6xl mb-4">üéâ</div>
                <h2 class="text-2xl font-bold text-cyan-400 mb-2">Kuis Selesai!</h2>
                <p class="text-green-400">Terima kasih <span id="finalName" class="font-semibold text-yellow-400"></span></p>
            </div>
            
            <div class="bg-gray-900 border-2 border-cyan-400 p-6 mb-6" style="box-shadow: inset 0 0 15px #00ff41;">
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="text-center">
                        <div class="text-2xl font-bold text-green-600" id="correctCount">0</div>
                        <div class="text-sm text-green-400">Benar</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-red-600" id="wrongCount">0</div>
                        <div class="text-sm text-gray-600">Salah</div>
                    </div>
                </div>
                
                <div class="text-center">
                    <div class="text-3xl font-bold text-purple-600 mb-1" id="percentage">0%</div>
                    <div class="text-sm text-gray-600">Tingkat Kebenaran</div>
                </div>
            </div>
            
            <div class="space-y-3">
                <button onclick="saveResultImage()" class="w-full bg-blue-600 border-2 border-cyan-400 text-white font-semibold py-3 px-6 hover:bg-cyan-600 transform hover:scale-105 transition-all duration-200 flex items-center justify-center space-x-2 mb-3" style="box-shadow: 0 0 15px #06b6d4;">
                    <span>üíæ</span>
                    <span>Save Image</span>
                </button>
                <button onclick="restartQuiz()" class="w-full bg-red-600 border-2 border-yellow-400 text-white font-semibold py-3 px-6 hover:bg-red-700 transform hover:scale-105 transition-all duration-200" style="box-shadow: 0 0 15px #ff0040;">
                    Main Lagi üîÑ
                </button>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // KONFIGURASI KUIS - EDIT BAGIAN INI SAJA!
        // ========================================
        
        // Judul Kuis (ganti sesuai tema Anda)
        const QUIZ_TITLE = "üß† Kuis Pintar";
        const QUIZ_SUBTITLE = "Uji pengetahuan Anda!";
        
        // Daftar Pertanyaan (tambah sebanyak yang Anda mau!)
        const questions = [
            {
                question: "Apa ibu kota Indonesia?",
                english: "What is the capital of Indonesia?",
                answers: ["Jakarta", "Bandung", "Surabaya", "Medan"],
                correct: 0  // Index jawaban benar (mulai dari 0)
            },
            {
                question: "Berapa hasil dari 15 + 25?",
                english: "What is the result of 15 + 25?",
                answers: ["35", "40", "45", "50"],
                correct: 1
            },
            {
                question: "Planet terdekat dengan Matahari adalah?",
                english: "The closest planet to the Sun is?",
                answers: ["Venus", "Merkurius", "Mars", "Bumi"],
                correct: 1
            },
            {
                question: "Siapa penemu lampu pijar?",
                english: "Who invented the light bulb?",
                answers: ["Thomas Edison", "Albert Einstein", "Isaac Newton", "Nikola Tesla"],
                correct: 0
            },
            {
                question: "Berapa jumlah benua di dunia?",
                english: "How many continents are there in the world?",
                answers: ["5", "6", "7", "8"],
                correct: 2
            },
            {
                question: "Apa nama mata uang Jepang?",
                english: "What is the currency of Japan?",
                answers: ["Won", "Yuan", "Yen", "Rupiah"],
                correct: 2
            },
            {
                question: "Siapa presiden pertama Indonesia?",
                english: "Who was the first president of Indonesia?",
                answers: ["Soekarno", "Soeharto", "Habibie", "Megawati"],
                correct: 0
            },
            {
                question: "Berapa hasil dari 8 x 7?",
                english: "What is the result of 8 x 7?",
                answers: ["54", "56", "58", "60"],
                correct: 1
            },
            {
                question: "Apa nama laut yang memisahkan Jawa dan Sumatra?",
                english: "What is the name of the sea that separates Java and Sumatra?",
                answers: ["Laut Jawa", "Selat Sunda", "Laut Banda", "Selat Malaka"],
                correct: 1
            },
            {
                question: "Berapa jumlah provinsi di Indonesia saat ini?",
                english: "How many provinces are there in Indonesia currently?",
                answers: ["32", "34", "36", "38"],
                correct: 3
            }
        ];
        
        // ========================================
        // AKHIR KONFIGURASI
        // ========================================

        let currentQuestion = 0;
        let hearts = 5;
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let playerName = "";

        // Initialize quiz with custom title
        function initializeQuiz() {
            document.getElementById('quizTitle').textContent = QUIZ_TITLE;
            document.getElementById('quizSubtitle').textContent = QUIZ_SUBTITLE;
        }

        // Initialize when page loads
        window.onload = function() {
            initializeQuiz();
        };

        function startQuiz() {
            const nameInput = document.getElementById('playerName');
            if (nameInput.value.trim() === '') {
                alert('Silakan masukkan nama Anda terlebih dahulu!');
                return;
            }
            
            playerName = nameInput.value.trim();
            document.getElementById('displayName').textContent = playerName;
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('quizScreen').classList.remove('hidden');
            
            showQuestion();
        }

        // MP3 Sound effects
        function playCorrectSound() {
            try {
                const audio = new Audio();
                audio.src = 'https://dl.sndup.net/8d4k6/Correct.mp3'; // Ganti dengan URL MP3 Anda
                audio.volume = 0.7;
                audio.play().catch(e => console.log('Audio play failed:', e));
            } catch (error) {
                console.log('Error playing correct sound:', error);
                // Fallback ke Web Audio API jika MP3 gagal
                playFallbackCorrectSound();
            }
        }

        function playWrongSound() {
            try {
                const audio = new Audio();
                audio.src = 'https://dl.sndup.net/xgstd/Wrong.mp3'; // Ganti dengan URL MP3 Anda
                audio.volume = 0.7;
                audio.play().catch(e => console.log('Audio play failed:', e));
            } catch (error) {
                console.log('Error playing wrong sound:', error);
                // Fallback ke Web Audio API jika MP3 gagal
                playFallbackWrongSound();
            }
        }

        function playGameOverSound() {
            try {
                const audio = new Audio();
                audio.src = 'https://dl.sndup.net/s67pg/Gameover.mp3'; // Ganti dengan URL MP3 Anda
                audio.volume = 0.8;
                audio.play().catch(e => console.log('Audio play failed:', e));
            } catch (error) {
                console.log('Error playing game over sound:', error);
                // Fallback ke Web Audio API jika MP3 gagal
                playFallbackWrongSound();
            }
        }

        function playWinningSound() {
            try {
                const audio = new Audio();
                audio.src = 'https://dl.sndup.net/nppfg/Winning.mp3'; // Ganti dengan URL MP3 Anda
                audio.volume = 0.9;
                audio.play().catch(e => console.log('Audio play failed:', e));
            } catch (error) {
                console.log('Error playing winning sound:', error);
                // Fallback ke Web Audio API jika MP3 gagal
                playFallbackWinningSound();
            }
        }

        // Fallback sounds menggunakan Web Audio API
        function playFallbackCorrectSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
            oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
            oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2); // G5
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        function playFallbackWrongSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(100, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(50, audioContext.currentTime + 0.5);
            
            gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        function playFallbackWinningSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Victory fanfare dengan multiple notes
            const notes = [523.25, 659.25, 783.99, 1046.50]; // C5, E5, G5, C6
            const durations = [0.3, 0.3, 0.3, 0.6];
            
            notes.forEach((frequency, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime + index * 0.2);
                
                gainNode.gain.setValueAtTime(0.4, audioContext.currentTime + index * 0.2);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + index * 0.2 + durations[index]);
                
                oscillator.start(audioContext.currentTime + index * 0.2);
                oscillator.stop(audioContext.currentTime + index * 0.2 + durations[index]);
            });
        }

        function showQuestion() {
            if (hearts <= 0) {
                showGameOver();
                return;
            }
            if (currentQuestion >= questions.length) {
                showResults();
                return;
            }

            const question = questions[currentQuestion];
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('englishText').textContent = question.english;
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            document.getElementById('totalQuestions').textContent = questions.length;
            
            const container = document.getElementById('answersContainer');
            container.innerHTML = '';
            
            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'bg-black border-2 border-yellow-400 text-white hover:bg-yellow-600 hover:text-black p-4 text-left font-medium transition-all duration-200 transform hover:scale-105';
                button.style.boxShadow = '0 0 10px #fbbf24';
                button.textContent = answer;
                button.onclick = () => selectAnswer(index);
                container.appendChild(button);
            });

            // Update progress bar
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function selectAnswer(selectedIndex) {
            const question = questions[currentQuestion];
            const buttons = document.querySelectorAll('#answersContainer button');
            
            // Disable all buttons
            buttons.forEach(btn => btn.disabled = true);
            
            if (selectedIndex === question.correct) {
                // Correct answer
                buttons[selectedIndex].classList.remove('bg-black', 'border-yellow-400');
                buttons[selectedIndex].classList.add('bg-green-600', 'border-green-400', 'text-white');
                buttons[selectedIndex].style.boxShadow = '0 0 15px #10b981';
                correctAnswers++;
                playCorrectSound();
            } else {
                // Wrong answer
                buttons[selectedIndex].classList.remove('bg-black', 'border-yellow-400');
                buttons[selectedIndex].classList.add('bg-red-600', 'border-red-400', 'text-white');
                buttons[selectedIndex].style.boxShadow = '0 0 15px #ef4444';
                
                // Show correct answer
                buttons[question.correct].classList.remove('bg-black', 'border-yellow-400');
                buttons[question.correct].classList.add('bg-green-600', 'border-green-400', 'text-white');
                buttons[question.correct].style.boxShadow = '0 0 15px #10b981';
                
                wrongAnswers++;
                loseHeart();
                playWrongSound();
            }
            
            // Move to next question after delay
            setTimeout(() => {
                currentQuestion++;
                showQuestion();
            }, 2000);
        }

        function loseHeart() {
            hearts--;
            const heartsContainer = document.getElementById('hearts');
            const heartElements = heartsContainer.children;
            
            if (hearts >= 0 && hearts < heartElements.length) {
                heartElements[heartElements.length - 1 - (4 - hearts)].textContent = 'üíî';
                heartElements[heartElements.length - 1 - (4 - hearts)].classList.add('heart-bounce');
            }
        }

        function showGameOver() {
            document.getElementById('quizScreen').classList.add('hidden');
            document.getElementById('gameOverPopup').classList.remove('hidden');
            
            // Update game over statistics
            document.getElementById('gameOverCorrect').textContent = correctAnswers;
            document.getElementById('gameOverWrong').textContent = wrongAnswers;
            
            // Play game over sound
            playGameOverSound();
        }

        function restartFromGameOver() {
            document.getElementById('gameOverPopup').classList.add('hidden');
            restartQuiz();
        }

        function showResults() {
            document.getElementById('quizScreen').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');
            
            const totalQuestions = correctAnswers + wrongAnswers;
            const percentage = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;
            
            document.getElementById('finalName').textContent = playerName;
            document.getElementById('correctCount').textContent = correctAnswers;
            document.getElementById('wrongCount').textContent = wrongAnswers;
            document.getElementById('percentage').textContent = percentage + '%';
            
            // Set result icon based on performance
            const resultIcon = document.getElementById('resultIcon');
            if (percentage >= 80) {
                resultIcon.textContent = 'üèÜ';
                playWinningSound(); // Play victory sound for excellent performance
            } else if (percentage >= 60) {
                resultIcon.textContent = 'üéâ';
                playWinningSound(); // Play victory sound for good performance
            } else if (percentage >= 40) {
                resultIcon.textContent = 'üëç';
            } else {
                resultIcon.textContent = 'üí™';
            }
        }

        function shareToWhatsApp() {
            const totalQuestions = correctAnswers + wrongAnswers;
            const percentage = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;
            
            const message = `üß† *Hasil Kuis Pintar Saya!*\n\n` +
                          `üë§ Nama: ${playerName}\n` +
                          `‚úÖ Jawaban Benar: ${correctAnswers}\n` +
                          `‚ùå Jawaban Salah: ${wrongAnswers}\n` +
                          `üìä Tingkat Kebenaran: ${percentage}%\n\n` +
                          `Coba juga kuis ini! üöÄ`;
            
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        function saveResultImage() {
            try {
                // Create canvas for result image
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 800;
                canvas.height = 600;
                
                // 8-bit style background gradient
                const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, '#1a1a2e');
                gradient.addColorStop(0.25, '#16213e');
                gradient.addColorStop(0.5, '#0f3460');
                gradient.addColorStop(0.75, '#533483');
                gradient.addColorStop(1, '#e94560');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Add 8-bit decorative elements
                ctx.fillStyle = '#00ff41';
                ctx.fillRect(50, 50, 20, 20);
                ctx.fillRect(730, 530, 20, 20);
                
                ctx.fillStyle = '#ff0040';
                ctx.fillRect(700, 80, 15, 15);
                ctx.fillRect(80, 520, 15, 15);
                
                ctx.fillStyle = '#ffff00';
                ctx.fillRect(650, 150, 25, 25);
                ctx.fillRect(125, 450, 25, 25);
                
                // Title with 8-bit style
                ctx.fillStyle = '#00ffff';
                ctx.font = 'bold 36px monospace';
                ctx.textAlign = 'center';
                ctx.fillText('üß† HASIL KUIS PINTAR', canvas.width/2, 80);
                
                // Player name
                ctx.fillStyle = '#ffff00';
                ctx.font = 'bold 24px monospace';
                ctx.fillText(`PLAYER: ${playerName.toUpperCase()}`, canvas.width/2, 130);
                
                // Results box with 8-bit border
                ctx.fillStyle = '#000000';
                ctx.fillRect(100, 180, 600, 300);
                ctx.strokeStyle = '#00ffff';
                ctx.lineWidth = 4;
                ctx.strokeRect(100, 180, 600, 300);
                
                // Results text
                ctx.fillStyle = '#00ff41';
                ctx.font = 'bold 20px monospace';
                ctx.fillText('=== STATISTIK GAME ===', canvas.width/2, 220);
                
                ctx.fillStyle = '#ffffff';
                ctx.font = '18px monospace';
                ctx.fillText(`JAWABAN BENAR: ${correctAnswers}`, canvas.width/2, 270);
                ctx.fillText(`JAWABAN SALAH: ${wrongAnswers}`, canvas.width/2, 310);
                
                const totalQuestions = correctAnswers + wrongAnswers;
                const percentage = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;
                
                ctx.fillStyle = '#ffff00';
                ctx.font = 'bold 24px monospace';
                ctx.fillText(`SKOR AKHIR: ${percentage}%`, canvas.width/2, 360);
                
                // Performance message
                let message = '';
                if (percentage >= 80) message = 'EXCELLENT! üèÜ';
                else if (percentage >= 60) message = 'GOOD JOB! üéâ';
                else if (percentage >= 40) message = 'NOT BAD! üëç';
                else message = 'KEEP TRYING! üí™';
                
                ctx.fillStyle = '#ff0040';
                ctx.font = 'bold 16px monospace';
                ctx.fillText(message, canvas.width/2, 400);
                
                ctx.fillStyle = '#888888';
                ctx.font = '12px monospace';
                ctx.fillText('POWERED BY 8-BIT QUIZ ENGINE', canvas.width/2, 450);
                
                // Download image
                canvas.toBlob(function(blob) {
                    const link = document.createElement('a');
                    link.download = `8bit-quiz-result-${playerName.replace(/\s+/g, '-')}.png`;
                    link.href = URL.createObjectURL(blob);
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(link.href);
                });
                
            } catch (error) {
                console.error('Error saving image:', error);
                alert('Maaf, terjadi kesalahan saat menyimpan gambar. Silakan coba lagi.');
            }
        }

        // Add roundRect function for older browsers
        if (!CanvasRenderingContext2D.prototype.roundRect) {
            CanvasRenderingContext2D.prototype.roundRect = function(x, y, width, height, radius) {
                this.beginPath();
                this.moveTo(x + radius, y);
                this.lineTo(x + width - radius, y);
                this.quadraticCurveTo(x + width, y, x + width, y + radius);
                this.lineTo(x + width, y + height - radius);
                this.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
                this.lineTo(x + radius, y + height);
                this.quadraticCurveTo(x, y + height, x, y + height - radius);
                this.lineTo(x, y + radius);
                this.quadraticCurveTo(x, y, x + radius, y);
                this.closePath();
            };
        }

        function restartQuiz() {
            // Reset all variables
            currentQuestion = 0;
            hearts = 5;
            correctAnswers = 0;
            wrongAnswers = 0;
            
            // Reset hearts display
            const heartsContainer = document.getElementById('hearts');
            Array.from(heartsContainer.children).forEach(heart => {
                heart.textContent = '‚ù§Ô∏è';
                heart.classList.remove('heart-bounce');
            });
            
            // Show start screen
            document.getElementById('resultScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
            
            // Clear name input
            document.getElementById('playerName').value = '';
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96709d87572b4104',t:'MTc1MzgzNDA0MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
